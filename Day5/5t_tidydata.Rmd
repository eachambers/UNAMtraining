---
title: "Working with data (tidyr and dplyr)"
author: "E. Anne Chambers"
output:
  html_document: default
---

```{r setup, include=FALSE}
# Prevent warning and messages from displaying in the pdf of this document
knitr::opts_chunk$set(message = FALSE, warning=FALSE)
```

Download the files relevant for Day 5 exercises (found [here](https://utexas.box.com/s/03xrlwixyoxmxtpxnlhx6oz6gbap8ice)), unzip the folder, and move it to the folder that this current file is in. The first thing we always need to do for running R is to load (or install) any packages or dependencies.
```{r}
# install.packages("tidyverse") # you'll only have to do this once
library(tidyverse)
```

## Exercise 1: Spreading and gathering

Let's first take a look at the Exercise 1 dataset which we'll call `lampro`. This is a fake Structure-style output for k=2 clusters.
```{r}
# read in a tab-separated file which we can do using a URL:
lampro = read_tsv("Day5_tidyr_worksheet_files/exercise1_lampro.txt", col_names = TRUE)
# get acquainted with the dataframe:
head(lampro)
```

1. Is `lampro` an example of a tidy dataset? If not, how could you use `gather` or `spread` to make it tidy?
```{r}
# your code here
```

2. Now, reverse what you've just done above by using the opposite function.

```{r}
# your code here
```

## Exercise 2: 

The `quakes` dataset describes the number of earthquakes observed at stations around Fiji.

```{r}
data(quakes)
# first get acquainted with the dataframe:
head(quakes)
```

1. Make a new dataset that adds a column to `quakes` that shows the magnitude of the earthquake divided by the maximum magnitude earthquake ever experienced (which is 6.4).
```{r}
#your code here
```

2. Print a dataframe that shows only the earthquakes that were less than (or equal to) 100m deep. Working off your code, count how many there were.
```{r}
#your code here
```

3. How many earthquakes greater than 4.5 magnitude were there at each station?
```{r}
# your code here
```

4. The capital of Fiji is Suva, located at (-18.1, 178.5). Which earthquakes were within 0.1 decimal degrees of the city's LONGITUDE? How many were there? How many of these were of a magnitude that was higher than 5?
```{r}
# your code here
```

5. Make a new dataframe that only has the station, the mean magnitude, and the mean depth at each station. Arrange the dataframe in ascending station number. (Make this trickier by removing any duplicate rows).
```{r}
# your code here
```